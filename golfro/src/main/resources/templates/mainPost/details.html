<!DOCTYPE html>
<html xmlns:th="http://www.thymleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Golfro</title>
<link rel="stylesheet" type="text/css" th:href="@{/css/header.css}">
<link rel="stylesheet" type="text/css"
    th:href="@{/css/main_details.css}">
<link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous">

</head>
<body>
    <header th:replace="~{fragments/header :: header}"></header>
    <main>
        <div
            class="container d-flex flex-column justify-content-center align-items-center">
            <div class=" container-fluid card border-0"
                th:object="${post}">

                <h2>LESSON</h2>
                <h7>골프에 대해 궁금한 점들을 물어보세요.</h7>
                <!--    <input id="sessionUser" type="text"
                    th:value="${session.signedInUser}" /> <input
                    id="postAuthor" type="text"
                    th:value="${post.userid}" /> <input
                    id="sessionUserId" type="text"
                    th:value="${session.signedInUserId}" /> -->


                <div class="mobile-header">
                    <a href="/">LESSON > </a><span>골프에 대해 궁금한 점들을
                        물어보세요.</span>
                </div>

                <div
                    class="card-header border-0 form-control container-fluid">
                    <div class="category">
                        <span class="cl"> 클럽종류 / </span> <span
                            class="club" th:text="*{clubName}"></span>
                    </div>
                    <div class="mb-2">
                        <span id="detailsTitle" th:text="*{title}"></span>
                    </div>
                    <div class="date-container mb-3">
                        <p>
                            <svg xmlns="http://www.w3.org/2000/svg"
                                width="16" height="16"
                                fill="currentColor" class="bi bi-alarm"
                                viewBox="0 0 16 16">
  <path
                                    d="M8.5 5.5a.5.5 0 0 0-1 0v3.362l-1.429 2.38a.5.5 0 1 0 .858.515l1.5-2.5A.5.5 0 0 0 8.5 9z" />
  <path
                                    d="M6.5 0a.5.5 0 0 0 0 1H7v1.07a7.001 7.001 0 0 0-3.273 12.474l-.602.602a.5.5 0 0 0 .707.708l.746-.746A6.97 6.97 0 0 0 8 16a6.97 6.97 0 0 0 3.422-.892l.746.746a.5.5 0 0 0 .707-.708l-.601-.602A7.001 7.001 0 0 0 9 2.07V1h.5a.5.5 0 0 0 0-1zm1.038 3.018a6 6 0 0 1 .924 0 6 6 0 1 1-.924 0M0 3.5c0 .753.333 1.429.86 1.887A8.04 8.04 0 0 1 4.387 1.86 2.5 2.5 0 0 0 0 3.5M13.5 1c-.753 0-1.429.333-1.887.86a8.04 8.04 0 0 1 3.527 3.527A2.5 2.5 0 0 0 13.5 1" />
</svg>
                            <span
                                th:text="| *{#temporals.format(createdTime, 'yyyy-MM-dd HH:mm:ss')}|"></span>
                        </p>
                        <p>
                            <svg xmlns="http://www.w3.org/2000/svg"
                                width="16" height="16"
                                fill="currentColor"
                                class="bi bi-alarm-fill"
                                viewBox="0 0 16 16">
  <path
                                    d="M6 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1H9v1.07a7.001 7.001 0 0 1 3.274 12.474l.601.602a.5.5 0 0 1-.707.708l-.746-.746A6.97 6.97 0 0 1 8 16a6.97 6.97 0 0 1-3.422-.892l-.746.746a.5.5 0 0 1-.707-.708l.602-.602A7.001 7.001 0 0 1 7 2.07V1h-.5A.5.5 0 0 1 6 .5m2.5 5a.5.5 0 0 0-1 0v3.362l-1.429 2.38a.5.5 0 1 0 .858.515l1.5-2.5A.5.5 0 0 0 8.5 9zM.86 5.387A2.5 2.5 0 1 1 4.387 1.86 8.04 8.04 0 0 0 .86 5.387M11.613 1.86a2.5 2.5 0 1 1 3.527 3.527 8.04 8.04 0 0 0-3.527-3.527" />
</svg>
                            <span
                                th:text="| *{#temporals.format(createdTime, 'yyyy-MM-dd HH:mm:ss')}|"></span>
                        </p>
                    </div>
                </div>

                <div class="mainTextArea">
                    <div class="left">
                        <video class="video-container" autoplay>
                            <source th:src="*{mediaPath}"
                                type="video/mp4">
                        </video>
                    </div>
                    <div class="right form-control">
                        <div
                            class="nick-date d-flex justify-content-start align-items-start">
                            <i
                                class="bi bi-person-circle d-flex justify-content-start align-items-start"></i>
                            <div class="nickname mb-2">
                                <h7 th:text="*{nickname}"></h7>
                                <div>
                                    <span
                                        th:text="*{height == null ? '키: 데이터 없음' : '키: ' + height + 'cm /'}"></span>
                                    <span
                                        th:text="*{career == null ? '구력: 데이터 없음' : '구력: ' + career + '년 /'}"></span>
                                    <span
                                        th:text="*{handy == null ? '헨디: 데이터 없음' : '헨디: ' + handy + ' /'}"></span>
                                    <span
                                        th:text="*{ironDistance == null ? '아이언 평균 거리: 데이터 없음' : '아이언 평균 거리: ' + ironDistance + 'm /'}"></span>
                                    <span
                                        th:text="*{driverDistance == null ? '드라이버 평균 거리: 데이터 없음' : '드라이버 평균 거리: ' + driverDistance + 'm'}"></span>
                                </div>
                            </div>
                        </div>

                        <div class="post">
                            <div class="post-sticky mb-2">
                                <div class="post-content">
                                    <p th:text="*{content}"></p>
                                </div>
                                <!-- 포커싱할 댓글 id -->
                                <input type="hidden" id="commentId"
                                    th:value="${commentId}" />
                            </div>

                            <!-- 댓글 리스트 영역 -->
                            <div class="comments-section form-control">
                                <div class="form-group">
                                    <input class="form-control mt-2"
                                        type="hidden" id="signedInUser"
                                        required
                                        th:value="${session.signedInUser}" />
                                    <input type="hidden" id="postId"
                                        th:value="*{id}" />
                                </div>
                            </div>


                        </div>
                        <div class="last-section">
                            <div
                                class="sub d-flex justify-content-between align-items-center">

                                <!-- 조회수, 추천하기 영역 -->
                                <div
                                    class="views-likes-container d-flex align-items-center">
                                    <span th:text="|게시글 조회수 : *{views}|"><i
                                        class="bi bi-eye"></i> </span>
                                    <button id="likes">
                                        <svg
                                            xmlns="http://www.w3.org/2000/svg"
                                            width="16" height="16"
                                            fill="currentColor"
                                            class="bi bi-heart"
                                            viewBox="0 0 16 16">
  <path
                                                d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15" />
</svg>
                                    </button>
                                    <p id="likesCounts"
                                        th:text="| *{likes}|"></p>
                                </div>



                                <!-- 하단 수정하기, 삭제 버튼 영역 -->
                                <div class="dropdown">
                                    <button class="btn dropdown-toggle"
                                        type="button"
                                        id="dropdownMenuButton"
                                        data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        <i class="bi bi-three-dots"></i>
                                    </button>
                                    <ul class="dropdown-menu"
                                        aria-labelledby="dropdownMenuButton">
                                        <!-- 조건: 세션의 signedInUser와 post.author가 같거나 signedInUser가 'admin'인 경우 -->
                                        <li
                                            th:if="${session.signedInUser eq post.userid or session.signedInUser eq 'admin'}">
                                            <button
                                                class="dropdown-item btnModifyid">수정하기</button>
                                        </li>
                                        <li
                                            th:if="${session.signedInUser eq post.userid or session.signedInUser eq 'admin'}">
                                            <button
                                                class="dropdown-item btnDeleteMainPost">삭제하기</button>
                                        </li>
                                    </ul>
                                </div>



                            </div>

                            <div>
                                <!-- 전문가 승인이 완료된 회원의 경우 -->
                                <div
                                    th:if="${session.signedInUserGrade.id == 'G10'}">
                                    <textarea class="form-control"
                                        id="content" name="ctext"
                                        rows="3" required
                                        placeholder="피드백을 작성해주세요."></textarea>
                                </div>

                                <!-- 전문가 승인이 완료되지 않은 회원의 경우 -->
                                <div
                                    th:unless="${session.signedInUserGrade.id == 'G10'}">
                                    <textarea class="form-control"
                                        id="finishContent"
                                        readonly="readonly">전문가 승인이 완료된 회원만 작성 할 수 있습니다.</textarea>
                                </div>
                            </div>

                            <!-- 전문가 승인이 완료된 회원만 버튼이 노출 -->
                            <div
                                th:if="${session.signedInUserGrade.id == 'G10'}">
                                <button id="btnRegisterComment"
                                    class="btn form-control">피드백
                                    작성하기</button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 부트스트랩 -->
    <script th:src="@{/js/commentsSub.js}"></script>
    <script th:src="@{/js/commentsJS.js}"></script>
    <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

</body>
</html>